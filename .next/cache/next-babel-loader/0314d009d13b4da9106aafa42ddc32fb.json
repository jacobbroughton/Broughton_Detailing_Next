{"ast":null,"code":"// Creates a connection to MySql database using credentials\n// exports a function that ensures connections are closed once the query has resolved\nconst mysql = require(\"serverless-mysql\");\n\nrequire(\"dotenv\").config();\n\nconsole.log(\"this is the db.js file\");\nconst db = mysql({\n  config: {\n    host: process.env.HOST,\n    database: process.env.DATABASE,\n    user: process.env.USERNAME,\n    password: process.env.PASSWORD\n  }\n});\n\nexports.query = async query => {\n  console.log(\"THESE ARE THE ENV VARIABLES\");\n  console.log(\"HOST: \" + process.env.HOST);\n  console.log(\"DATABASE: \" + process.env.DATABASE);\n  console.log(\"USERNAME: \" + process.env.USERNAME);\n  console.log(\"PASSWORD: \" + process.env.PASSWORD);\n\n  try {\n    const results = await db.query(query);\n    await db.end();\n    return results;\n  } catch (error) {\n    console.log(\"ERROR FROM DB\");\n    return {\n      error\n    };\n  }\n};","map":{"version":3,"sources":["/Users/JacobBroughton/coding/work/broughton-detailing-next/lib/db.js"],"names":["mysql","require","config","console","log","db","host","process","env","HOST","database","DATABASE","user","USERNAME","password","PASSWORD","exports","query","results","end","error"],"mappings":"AAAA;AACA;AAGA,MAAMA,KAAK,GAAGC,OAAO,CAAC,kBAAD,CAArB;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACAC,OAAO,CAACC,GAAR,CAAY,wBAAZ;AAEA,MAAMC,EAAE,GAAGL,KAAK,CAAC;AACbE,EAAAA,MAAM,EAAE;AACJI,IAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,IADd;AAEJC,IAAAA,QAAQ,EAAEH,OAAO,CAACC,GAAR,CAAYG,QAFlB;AAGJC,IAAAA,IAAI,EAAEL,OAAO,CAACC,GAAR,CAAYK,QAHd;AAIJC,IAAAA,QAAQ,EAAEP,OAAO,CAACC,GAAR,CAAYO;AAJlB;AADK,CAAD,CAAhB;;AASAC,OAAO,CAACC,KAAR,GAAgB,MAAMA,KAAN,IAAe;AAC3Bd,EAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAWG,OAAO,CAACC,GAAR,CAAYC,IAAnC;AACAN,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAeG,OAAO,CAACC,GAAR,CAAYG,QAAvC;AACAR,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAeG,OAAO,CAACC,GAAR,CAAYK,QAAvC;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAeG,OAAO,CAACC,GAAR,CAAYO,QAAvC;;AACA,MAAI;AACA,UAAMG,OAAO,GAAG,MAAMb,EAAE,CAACY,KAAH,CAASA,KAAT,CAAtB;AACA,UAAMZ,EAAE,CAACc,GAAH,EAAN;AACA,WAAOD,OAAP;AACH,GAJD,CAIE,OAAOE,KAAP,EAAc;AACZjB,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,WAAO;AAACgB,MAAAA;AAAD,KAAP;AACH;AACJ,CAdD","sourcesContent":["// Creates a connection to MySql database using credentials\n// exports a function that ensures connections are closed once the query has resolved\n\n\nconst mysql = require(\"serverless-mysql\");\nrequire(\"dotenv\").config();\nconsole.log(\"this is the db.js file\")\n\nconst db = mysql({\n    config: {\n        host: process.env.HOST,\n        database: process.env.DATABASE,\n        user: process.env.USERNAME,\n        password: process.env.PASSWORD\n    }\n})\n\nexports.query = async query => {\n    console.log(\"THESE ARE THE ENV VARIABLES\");\n    console.log(\"HOST: \" + process.env.HOST)\n    console.log(\"DATABASE: \" + process.env.DATABASE)\n    console.log(\"USERNAME: \" + process.env.USERNAME)\n    console.log(\"PASSWORD: \" + process.env.PASSWORD)\n    try {\n        const results = await db.query(query);\n        await db.end()\n        return results\n    } catch (error) {\n        console.log(\"ERROR FROM DB\")\n        return {error}\n    }\n}"]},"metadata":{},"sourceType":"script"}